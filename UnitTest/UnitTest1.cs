using System;
using Microsoft.VisualStudio.TestTools.UnitTesting;

namespace Kogler.SerialCOM
{
    [TestClass]
    public class BisModelTest
    {
        [TestMethod]
        public void ReadDataTest()
        {
            var bis = new BisModel();
            var testData = @"07/03/2015 13:39:45|       10|      27|On      |None    |Off    
 |Off     |Yes     |     0.0| 
   10.1|    0000|    36.2|    6
0.9|    26.9|   100.0|      10
|00000000|     0.0|     0.1|  
  0000|    32.8|    60.9|    2
6.9|   100.0|       7|00000000
|     0.0|    10.1|    0000|  
  36.2|    60.9|    26.9|   100.0|       0|00000000|
 
07/03/2015 13:39:50|       10|    
  27|On      |None    |Off    
 |Off     |Yes     |     0.0|    10.0|    0000|    34.6|    60.9|    26.9|   100.0|      10
|00000000|     0.0|     0.2|    0000|    31.6|    60.9|    2
6.9|   100.0|       7|00000000|     0.0|    10.0|    0000|  
  34.6|    60.9|    26.9|   10
0.0|       0|00000000|
 
07/03/2015 13:39:55|       10|      27|On 
     |None    |Off     |Off   
  |Yes     |     0.0|    10.1|
    0000|    37.8|    60.6|   
 26.5|   100.0|      10|00000008|     0.0|     0.1|    0000|
    35.2|    60.6|    26.5|   1
00.0|       7|00000000|     0.
0|    10.1|    0000|    37.8|    60.6|    26.5|   100.0|    
   0|00000008|
 
07/03/2015 13:40:00|       10|      27
|On      |None    |Off     |Off     |Yes     |     0.0|    1
0.4|    0000|    40.7|    59.3
|    26.8|   100.0|      10|00000080|     0.0|     0.1|    0
000|    38.6|    59.3|    26.8
|   100.0|       7|00000000|   
  0.0|    10.4|    0000|    40.7|    59.3|    26.8|   100.0|
       0|00000080|
 
07/03/2015 13:40:05|       10|  
    27|On      |None    |Off     |Off     |Yes     |     0.0|
    10.9|    0000|    42.3|   
 60.9|    28.6|   100.0|      
10|00000080|     0.0|     0.1|    0000|    41.3|    60.9|   
 28.6|   100.0|       7|000000
00|     0.0|    10.9|    0000|
    42.3|    60.9|    28.6|   
100.0|       0|00000080|";
            var lines = testData.Split(new[] { Environment.NewLine}, StringSplitOptions.None);
            foreach (var line in lines)
            {
                bis.AddData(line);
            }

            Assert.AreEqual(bis.Entries.Count, 5);
        }
    }
}
